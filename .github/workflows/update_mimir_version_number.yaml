name: 'Update MIMIR version number'
on:
  pull_request:
    types: [labeled, unlabeled]
  # branches:
  #   - 'master'

jobs:
  update_pr:
    runs-on: ubuntu-latest
    steps:
      # - name: Determine Version Bump Type
      #   id: determine_bump_type
      #   run: |
      #     LABELS="${{ github.event.pull_request.labels.*.name }}"

      #     if [[ $LABELS == *"major-release"* ]]; then
      #       echo "major"
      #     elif [[ $LABELS == *"minor-release"* ]]; then
      #       echo "minor"
      #     elif [[ $LABELS == *"patch-release"* ]]; then
      #       echo "patch"
      #     fi
      - name: Git checkout
        uses: actions/checkout@v3
      - name: Get Version Number
        run: |
          VERSION=$(awk -F' = ' '/^version/ {print $2}' ./gradle.properties)
          echo "VERSION=${VERSION}" >> $GITHUB_ENV
      - name: Set Version Number
        run: |
          ex -s -c '%s/${VERSION}/1.1.1/g|x' ./gradle.properties
      - name: Git add
        run: |
          git add ./gradle.properties
      - name: Git commit
        run: |
          git commit -m "Update version number to 1.1.1"
      - name: Git push
        run: |
          git push 
      - name: Print Version Number
        run: |
          # Access the version number from the environment variable
          echo "Using Version Number in Later Step: $VERSION"
